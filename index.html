<!DOCTYPE html>
<html lang="ht">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>LOTATO PRO | Agent</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
    <div class="app-shell">
        <!-- Header -->
        <header>
            <div class="brand">
                <h1>LOTATO <span class="pro-badge">PRO</span></h1>
                <div style="font-size: 0.8rem; color: var(--text-dim);" id="live-clock">00:00:00</div>
            </div>
            <div class="user-profile">
                <span id="agent-name">Agent</span>
                <div class="status-dot" style="width: 10px; height: 10px; border-radius: 50%; background: var(--success);"></div>
            </div>
        </header>

        <!-- Screens -->
        <!-- Draw Selection Screen -->
        <div id="draw-selection-screen" class="screen active">
            <div style="padding: 20px; text-align: center;">
                <h2 style="margin-bottom: 10px;">Chwazi Tiraj Ou</h2>
                <p style="color: var(--text-dim); margin-bottom: 20px;">Chwazi tiraj la oswa itilize plizyè tiraj</p>
            </div>
            
            <div style="padding: 0 20px;">
                <button id="multi-draw-btn" class="multi-draw-toggle" onclick="toggleMultiDrawMode()">
                    <i class="fas fa-layer-group"></i> Plizyè Tiraj
                </button>
            </div>

            <div id="multi-draw-container" class="multi-draw-selector" style="display: none;">
                <!-- Multi-draw checkboxes will be loaded here -->
            </div>

            <button id="multi-draw-continue" class="btn-success-full" style="display: none;" onclick="continueToBettingWithMultiDraw()">
                <i class="fas fa-check-circle"></i> Kontinye ak <span id="selected-draws-count">0</span> Tiraj
            </button>

            <div id="draws-container" class="draw-grid">
                <!-- Draws will be loaded here -->
            </div>
        </div>

        <!-- Betting Screen -->
        <div id="betting-screen" class="screen">
            <div>
                <button class="back-button" onclick="goBackToDraws()" style="background: none; border: none; color: var(--secondary); font-size: 1.2rem; cursor: pointer; padding: 10px;">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2 class="section-title" id="current-draw-title">Tiraj</h2>
                <button id="print-header-btn" class="animate-fade" onclick="processFinalTicket()" style="display: none;">
                    <i class="fas fa-check-circle"></i> Valider
                </button>
            </div>

            <div id="multi-draw-indicator" class="multi-draw-indicator" style="display: none;">
                <i class="fas fa-layer-group"></i> <span id="selected-draws-count-indicator">1</span> tiraj chwazi
            </div>

            <div class="betting-panel">
                <!-- Game Type Selector -->
                <div class="game-selector" id="game-types">
                    <button class="chip active" data-game="borlette" onclick="selectMainGame('borlette')">Borlette</button>
                    <button class="chip" data-game="lotto" onclick="selectMainGame('lotto')">Lotto</button>
                    <button class="chip" data-game="special" onclick="selectMainGame('special')">Jeux Spéciaux</button>
                    <button class="chip" id="toggle-nx-btn" onclick="toggleNumericChips()">NX</button>
                </div>

                <!-- Numeric Chips (NX) -->
                <div id="numeric-chips" class="numeric-chips-container">
                    <button class="chip numeric-chip" data-game="n0" onclick="selectGame('n0')">N0</button>
                    <button class="chip numeric-chip" data-game="n1" onclick="selectGame('n1')">N1</button>
                    <button class="chip numeric-chip" data-game="n2" onclick="selectGame('n2')">N2</button>
                    <button class="chip numeric-chip" data-game="n3" onclick="selectGame('n3')">N3</button>
                    <button class="chip numeric-chip" data-game="n4" onclick="selectGame('n4')">N4</button>
                    <button class="chip numeric-chip" data-game="n5" onclick="selectGame('n5')">N5</button>
                    <button class="chip numeric-chip" data-game="n6" onclick="selectGame('n6')">N6</button>
                    <button class="chip numeric-chip" data-game="n7" onclick="selectGame('n7')">N7</button>
                    <button class="chip numeric-chip" data-game="n8" onclick="selectGame('n8')">N8</button>
                    <button class="chip numeric-chip" data-game="n9" onclick="selectGame('n9')">N9</button>
                </div>

                <!-- Lotto Games Container -->
                <div id="lotto-games" class="lotto-games-container">
                    <button class="sub-game-btn" onclick="selectGame('lotto3')">Lotto 3</button>
                    <button class="sub-game-btn" onclick="selectGame('lotto4')">Lotto 4</button>
                    <button class="sub-game-btn" onclick="selectGame('lotto5')">Lotto 5</button>
                    <button class="sub-game-btn" onclick="selectGame('auto_lotto4')">Auto Lotto 4</button>
                    <button class="sub-game-btn" onclick="selectGame('auto_lotto5')">Auto Lotto 5</button>
                </div>

                <!-- Special Games Container -->
                <div id="special-games" class="special-games-container">
                    <button class="sub-game-btn" onclick="selectGame('mariage')">Mariage</button>
                    <button class="sub-game-btn" onclick="selectGame('auto_marriage')">Auto Mariage</button>
                    <button class="sub-game-btn" onclick="selectGame('bo')">BO</button>
                    <button class="sub-game-btn" onclick="selectGame('grap')">GRAP</button>
                </div>

                <!-- Lotto Options -->
                <div id="lotto3-options" class="lotto-options">
                    <div class="option-chip" data-option="1" onclick="toggleLottoOption(3, 1)">
                        <input type="checkbox" id="lotto3-opt1">
                        <label for="lotto3-opt1">Avant</label>
                    </div>
                    <div class="option-chip" data-option="2" onclick="toggleLottoOption(3, 2)">
                        <input type="checkbox" id="lotto3-opt2">
                        <label for="lotto3-opt2">Milieu</label>
                    </div>
                    <div class="option-chip" data-option="3" onclick="toggleLottoOption(3, 3)">
                        <input type="checkbox" id="lotto3-opt3">
                        <label for="lotto3-opt3">Arrière</label>
                    </div>
                </div>

                <div id="lotto4-options" class="lotto-options">
                    <div class="option-chip" data-option="1" onclick="toggleLottoOption(4, 1)">
                        <input type="checkbox" id="lotto4-opt1">
                        <label for="lotto4-opt1">2 Avant</label>
                    </div>
                    <div class="option-chip" data-option="2" onclick="toggleLottoOption(4, 2)">
                        <input type="checkbox" id="lotto4-opt2">
                        <label for="lotto4-opt2">2 Arrière</label>
                    </div>
                    <div class="option-chip" data-option="3" onclick="toggleLottoOption(4, 3)">
                        <input type="checkbox" id="lotto4-opt3">
                        <label for="lotto4-opt3">Milieu</label>
                    </div>
                </div>

                <div id="lotto5-options" class="lotto-options">
                    <div class="option-chip" data-option="1" onclick="toggleLottoOption(5, 1)">
                        <input type="checkbox" id="lotto5-opt1">
                        <label for="lotto5-opt1">3 Avant</label>
                    </div>
                    <div class="option-chip" data-option="2" onclick="toggleLottoOption(5, 2)">
                        <input type="checkbox" id="lotto5-opt2">
                        <label for="lotto5-opt2">2 Arrière</label>
                    </div>
                    <div class="option-chip" data-option="3" onclick="toggleLottoOption(5, 3)">
                        <input type="checkbox" id="lotto5-opt3">
                        <label for="lotto5-opt3">Complet</label>
                    </div>
                </div>

                <!-- Input Section -->
                <div class="input-container">
                    <input type="text" id="num-input" placeholder="00" maxlength="5" autocomplete="off">
                    <input type="number" id="amt-input" placeholder="Montan" min="1" autocomplete="off">
                    <button id="add-bet-btn" class="btn-primary-gradient" onclick="CartManager.addBet()">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>

                <!-- Cart Section -->
                <div class="cart-section">
                    <div class="cart-header">
                        <h3>Panye Ou (<span id="items-count">0 jwèt</span>)</h3>
                        <div style="color: var(--text-dim); font-size: 0.9rem;" id="current-game-display">Borlette</div>
                    </div>
                    
                    <div class="cart-list" id="cart-display">
                        <div class="empty-msg">Pa gen paray ankò</div>
                    </div>
                    
                    <div id="cart-summary" style="display: none;">
                        <div class="total-row">
                            <span>Total:</span>
                            <span style="font-weight: bold; color: var(--secondary);" id="total-amount">0</span>
                        </div>
                        <button class="btn-success-full" onclick="processFinalTicket()">
                            <i class="fas fa-print"></i> Enprime Tikè (<span id="final-total">0</span> Gdes)
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- History Screen -->
        <div id="history-screen" class="screen">
            <div style="padding: 20px;">
                <h2 style="margin-bottom: 20px;">Istwa Tikè</h2>
                <div id="history-container" class="history-list">
                    <!-- History will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Reports Screen -->
        <div id="reports-screen" class="screen">
            <div style="padding: 20px;">
                <h2 style="margin-bottom: 20px;">Rapò Jodi a</h2>
                <div class="report-card">
                    <div class="report-row">
                        <span>Tikè Total:</span>
                        <span class="val" id="total-tickets">0</span>
                    </div>
                    <div class="report-row">
                        <span>Total Pari:</span>
                        <span class="val" id="total-bets">0 Gdes</span>
                    </div>
                    <div class="report-row">
                        <span>Total Ganyen:</span>
                        <span class="val" id="total-wins">0 Gdes</span>
                    </div>
                    <div class="report-row">
                        <span>Total Pèdi:</span>
                        <span class="val" id="total-loss">0 Gdes</span>
                    </div>
                    <div class="report-row total">
                        <span>Balans:</span>
                        <span class="val" id="balance">0 Gdes</span>
                    </div>
                </div>

                <div class="report-card">
                    <h3 style="margin-bottom: 15px;">Detay pa Jwèt</h3>
                    <div id="game-breakdown">
                        <!-- Game breakdown will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="nav-bar">
            <a href="#" class="nav-item active" onclick="switchTab('home')">
                <i class="fas fa-home"></i>
                <span>Akèy</span>
            </a>
            <a href="#" class="nav-item" onclick="switchTab('history')">
                <i class="fas fa-history"></i>
                <span>Istwa</span>
            </a>
            <a href="#" class="nav-item" onclick="switchTab('reports')">
                <i class="fas fa-chart-bar"></i>
                <span>Rapò</span>
            </a>
            <a href="#" class="nav-item" onclick="API.logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Sòti</span>
            </a>
        </nav>

        <!-- Winner Modal -->
        <div id="winner-modal" class="modal-overlay">
            <div class="winner-modal">
                <div class="trophy-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <h2>FELISITASYON!</h2>
                <p>Ou genyen yon gwo lotri!</p>
                <button class="btn-close" onclick="document.getElementById('winner-modal').style.display='none'">Fèmen</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>