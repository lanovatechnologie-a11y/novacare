<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Système de Gestion Hospitalier</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="login-screen" class="login-container">
        <div class="login-box">
            <div class="login-title">
                <i class="fas fa-hospital-alt"></i>
                <h2>Hôpital Saint-Luc</h2>
                <p>Système de Gestion Hospitalier</p>
            </div>
            
            <div class="login-buttons">
                <div class="login-role-btn" data-role="admin">
                    <i class="fas fa-user-shield"></i>
                    <p>Administration</p>
                </div>
                <div class="login-role-btn" data-role="doctor">
                    <i class="fas fa-user-md"></i>
                    <p>Docteur</p>
                </div>
                <div class="login-role-btn" data-role="lab">
                    <i class="fas fa-flask"></i>
                    <p>Laboratoire</p>
                </div>
                <div class="login-role-btn" data-role="pharmacy">
                    <i class="fas fa-pills"></i>
                    <p>Pharmacie</p>
                </div>
                <div class="login-role-btn" data-role="reception">
                    <i class="fas fa-user-tie"></i>
                    <p>Réception</p>
                </div>
                <div class="login-role-btn" data-role="cashier">
                    <i class="fas fa-cash-register"></i>
                    <p>Caissier</p>
                </div>
            </div>
            
            <form id="login-form">
                <div class="form-group">
                    <label class="form-label" for="username">Nom d'utilisateur</label>
                    <input type="text" id="username" class="form-control" placeholder="Entrez votre nom d'utilisateur" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="password">Mot de passe</label>
                    <input type="password" id="password" class="form-control" placeholder="Entrez votre mot de passe" required>
                </div>
                
                <div class="form-group">
                    <button type="submit" class="btn" style="width: 100%;">
                        <i class="fas fa-sign-in-alt"></i> Se Connecter
                    </button>
                </div>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i> SYSTEME EN PRODUCTION UTILISER LES MOTS DE PASSES DONNEE PAR LA NOVA
                </div>
            </form>
        </div>
    </div>
    
    <!-- Main Application -->
    <div id="main-app" class="hidden">
        <div class="container">
            <!-- Header -->
            <header class="header">
                <div class="logo">
                    <i class="fas fa-hospital-alt"></i>
                    <div>
                        <h1>Hôpital Saint-Luc</h1>
                        <p>Système de Gestion Hospitalier</p>
                    </div>
                </div>
                
                <div class="user-info">
                    <div>
                        <p id="current-user-role">Administrateur</p>
                        <p><strong id="current-username">Dr. Jean Martin</strong></p>
                    </div>
                    <button id="logout-btn" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i> Déconnexion
                    </button>
                </div>
            </header>
            
            <!-- Navigation Tabs -->
            <nav class="nav-tabs no-print">
                <div class="nav-tab active" data-target="dashboard">
                    <i class="fas fa-tachometer-alt"></i> Tableau de bord
                </div>
                <div class="nav-tab" data-target="patients">
                    <i class="fas fa-user-injured"></i> Dossier Patients
                </div>
                <div class="nav-tab" data-target="consultation">
                    <i class="fas fa-stethoscope"></i> Consultation
                </div>
                <div class="nav-tab" data-target="appointments">
                    <i class="fas fa-calendar-check"></i> Rendez-vous
                </div>
                <div class="nav-tab" data-target="laboratory">
                    <i class="fas fa-flask"></i> Laboratoire
                </div>
                <div class="nav-tab" data-target="pharmacy">
                    <i class="fas fa-pills"></i> Pharmacie
                </div>
                <div class="nav-tab" data-target="cashier">
                    <i class="fas fa-cash-register"></i> Caisse
                </div>
                <div class="nav-tab" data-target="administration">
                    <i class="fas fa-chart-bar"></i> Administration
                </div>
                <div class="nav-tab" data-target="employees">
                    <i class="fas fa-users"></i> Employés
                </div>
                <div class="nav-tab" data-target="emergency">
                    <i class="fas fa-ambulance"></i> Urgence
                </div>
            </nav>
            
            <!-- Dashboard Content -->
            <section id="dashboard" class="content active">
                <h2 class="section-title">
                    <i class="fas fa-tachometer-alt"></i> Tableau de Bord
                </h2>
                
                <!-- Employee Total Today -->
                <div id="employee-today-total" class="employee-total hidden">
                    <h3><i class="fas fa-money-bill-wave"></i> Vos revenus aujourd'hui</h3>
                    <p id="employee-service-total">Total: 0 Gdes</p>
                </div>
                
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon" style="background-color: #1a6bca;">
                            <i class="fas fa-user-injured"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-patients">0</h3>
                            <p>Patients enregistrés</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background-color: #28a745;">
                            <i class="fas fa-stethoscope"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-consultations">0</h3>
                            <p>Consultations aujourd'hui</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background-color: #ffc107;">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-appointments">0</h3>
                            <p>Rendez-vous aujourd'hui</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background-color: #dc3545;">
                            <i class="fas fa-flask"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-analyses">0</h3>
                            <p>Analyses en attente</p>
                        </div>
                    </div>
                </div>
                
                <!-- Today's Appointments for Doctors -->
                <div id="doctor-appointments-dashboard" class="card">
                    <h3><i class="fas fa-calendar-day"></i> Vos rendez-vous aujourd'hui</h3>
                    <div id="today-appointments-list">
                        <!-- Appointments will be added here -->
                    </div>
                </div>
                
                <div class="card">
                    <h3>Notifications</h3>
                    <div id="notifications-list">
                        <!-- Notifications will be added here -->
                    </div>
                </div>
            </section>
            
            <!-- Patients Content -->
            <section id="patients" class="content">
                <h2 class="section-title">
                    <i class="fas fa-user-injured"></i> Enregistrement des Patients
                </h2>
                
                <div class="card">
                    <h3>Nouveau Patient</h3>
                    <form id="patient-form">
                        <div class="d-flex" style="gap: 20px; margin-bottom: 20px;">
                            <div style="flex: 1;">
                                <label class="form-label" for="patient-name">Nom complet *</label>
                                <input type="text" id="patient-name" class="form-control" placeholder="Nom et prénom" required>
                            </div>
                            <div style="flex: 1;">
                                <label class="form-label" for="patient-dob">Date de naissance *</label>
                                <input type="date" id="patient-dob" class="form-control" required>
                            </div>
                        </div>
                        
                        <div class="d-flex" style="gap: 20px; margin-bottom: 20px;">
                            <div style="flex: 1;">
                                <label class="form-label" for="patient-birthplace">Lieu de naissance *</label>
                                <input type="text" id="patient-birthplace" class="form-control" placeholder="Ville, Pays" required>
                            </div>
                            <div style="flex: 1;">
                                <label class="form-label" for="patient-phone">Téléphone</label>
                                <input type="tel" id="patient-phone" class="form-control" placeholder="Numéro de téléphone">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="patient-address">Adresse</label>
                            <input type="text" id="patient-address" class="form-control" placeholder="Adresse complète">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="patient-responsible">Responsable (pour mineurs)</label>
                            <input type="text" id="patient-responsible" class="form-control" placeholder="Nom du responsable">
                        </div>
                        
                        <div class="d-flex" style="gap: 20px; margin-bottom: 20px;">
                            <div style="flex: 1;">
                                <label class="form-label" for="patient-pediatric">
                                    <input type="checkbox" id="patient-pediatric">
                                    Patient Pédiatrique
                                </label>
                            </div>
                            <div style="flex: 1;">
                                <label class="form-label" for="patient-emergency">
                                    <input type="checkbox" id="patient-emergency">
                                    Patient en urgence
                                </label>
                            </div>
                        </div>
                        
                        <div class="text-right">
                            <button type="submit" class="btn">
                                <i class="fas fa-save"></i> Enregistrer le Patient
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Patient Card Preview -->
                <div id="print-area" class="print-area">
                    <div class="patient-card">
                        <div class="hospital-logo">
                            <h2>Hôpital Saint-Luc</h2>
                            <p>Carte d'Identification du Patient</p>
                        </div>
                        
                        <div class="patient-photo-placeholder">
                            Photo
                        </div>
                        
                        <div class="patient-info">
                            <div class="patient-info-item">
                                <div class="patient-info-label">Numéro patient:</div>
                                <div id="card-patient-id">PA0001</div>
                            </div>
                            <div class="patient-info-item">
                                <div class="patient-info-label">Nom:</div>
                                <div id="card-patient-name">Jean Dupont</div>
                            </div>
                            <div class="patient-info-item">
                                <div class="patient-info-label">Date de naissance:</div>
                                <div id="card-patient-dob">15/03/1985</div>
                            </div>
                            <div class="patient-info-item">
                                <div class="patient-info-label">Lieu de naissance:</div>
                                <div id="card-patient-birthplace">Paris, France</div>
                            </div>
                            <div class="patient-info-item">
                                <div class="patient-info-label">Responsable:</div>
                                <div id="card-patient-responsible">Marie Dupont</div>
                            </div>
                            <div class="patient-info-item">
                                <div class="patient-info-label">Date d'enregistrement:</div>
                                <div id="card-patient-date">10/10/2023</div>
                            </div>
                        </div>
                        
                        <div class="text-center" style="margin-top: 20px; font-size: 0.9rem; color: #777;">
                            <p>Présentez cette carte à chaque visite</p>
                        </div>
                    </div>
                </div>
                
                <div id="patient-card-preview" class="hidden">
                    <div class="card">
                        <h3>Carte du Patient - Format 4x6</h3>
                        <div id="patient-card-display"></div>
                        
                        <div class="text-center">
                            <button id="print-card-btn" class="btn">
                                <i class="fas fa-print"></i> Imprimer la Carte
                            </button>
                            <button id="close-card-btn" class="btn btn-secondary">
                                <i class="fas fa-times"></i> Fermer
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Patients List -->
                <div class="card">
                    <h3>Patients enregistrés</h3>
                    <div class="table-container">
                        <table id="patients-table">
                            <thead>
                                <tr>
                                    <th>Numéro</th>
                                    <th>Nom</th>
                                    <th>Date de naissance</th>
                                    <th>Téléphone</th>
                                    <th>Date d'enregistrement</th>
                                    <th>Type</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="patients-table-body">
                                <!-- Patients will be added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <!-- Consultation Content -->
            <section id="consultation" class="content">
                <h2 class="section-title">
                    <i class="fas fa-stethoscope"></i> Consultation Médicale
                    <span class="service-price">500 Gdes</span>
                </h2>
                
                <div class="card">
                    <h3>Recherche du Patient</h3>
                    <div class="d-flex" style="gap: 15px;">
                        <div style="flex: 1;">
                            <label class="form-label" for="search-patient-id">Numéro du patient</label>
                            <input type="text" id="search-patient-id" class="form-control" placeholder="Entrez le numéro du patient">
                        </div>
                        <div style="align-self: flex-end;">
                            <button id="search-patient-btn" class="btn">
                                <i class="fas fa-search"></i> Rechercher
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Patient Info Display -->
                <div id="consultation-patient-info" class="card hidden">
                    <h3>Informations du Patient</h3>
                    <div id="consultation-patient-details">
                        <!-- Patient details will be added here -->
                    </div>
                </div>
                
                <!-- Consultation Form -->
                <div id="consultation-form-container" class="card hidden">
                    <h3>Formulaire de Consultation</h3>
                    <div id="medication-check-results"></div>
                    <form id="consultation-form">
                        <div class="form-group">
                            <label class="form-label" for="consultation-diagnosis">Diagnostic</label>
                            <textarea id="consultation-diagnosis" class="form-control" rows="3" placeholder="Décrivez le diagnostic"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Analyses demandées</label>
                            <div class="checkbox-grid">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="analysis-blood" value="Sang">
                                    <label for="analysis-blood">Analyse de sang</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="analysis-urine" value="Urine">
                                    <label for="analysis-urine">Analyse d'urine</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="analysis-stool" value="Selles">
                                    <label for="analysis-stool">Analyse de selles</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="analysis-ultrasound" value="Échographie">
                                    <label for="analysis-ultrasound">Échographie</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="analysis-xray" value="Radiographie">
                                    <label for="analysis-xray">Radiographie</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="analysis-ecg" value="ECG">
                                    <label for="analysis-ecg">ECG</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="analysis-sonography" value="Sonographie">
                                    <label for="analysis-sonography">Sonographie</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="analysis-mri" value="IRM">
                                    <label for="analysis-mri">IRM</label>
                                </div>
                            </div>
                            <label class="form-label mt-3" for="consultation-other-analysis">Autres analyses</label>
                            <textarea id="consultation-other-analysis" class="form-control" rows="2" placeholder="Autres analyses spécifiques"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Prescription de médicaments</label>
                            <table class="medication-table">
                                <thead>
                                    <tr>
                                        <th>Médicament</th>
                                        <th>Dosage</th>
                                        <th>Fréquence</th>
                                        <th>Durée</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="medication-table-body">
                                    <tr>
                                        <td><input type="text" class="form-control medication-name" placeholder="Paracétamol 500mg"></td>
                                        <td><input type="text" class="form-control medication-dosage" placeholder="1 comprimé"></td>
                                        <td><input type="text" class="form-control medication-frequency" placeholder="3 fois par jour"></td>
                                        <td><input type="text" class="form-control medication-duration" placeholder="5 jours"></td>
                                        <td><button type="button" class="btn btn-danger remove-medication-btn"><i class="fas fa-trash"></i></button></td>
                                    </tr>
                                </tbody>
                            </table>
                            <button type="button" id="add-medication-row-btn" class="btn btn-secondary mt-2">
                                <i class="fas fa-plus"></i> Ajouter un médicament
                            </button>
                            <div class="mt-2">
                                <button type="button" id="check-medications-btn" class="btn btn-secondary">
                                    <i class="fas fa-search"></i> Vérifier la disponibilité
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="consultation-notes">Notes supplémentaires</label>
                            <textarea id="consultation-notes" class="form-control" rows="2" placeholder="Notes additionnelles"></textarea>
                        </div>
                        
                        <div class="d-flex justify-between">
                            <button type="button" id="schedule-appointment-btn" class="btn btn-success">
                                <i class="fas fa-calendar-plus"></i> Prendre Rendez-vous
                            </button>
                            <button type="submit" class="btn">
                                <i class="fas fa-save"></i> Enregistrer la Consultation
                            </button>
                        </div>
                    </form>
                </div>
            </section>
            
            <!-- Appointments Content -->
            <section id="appointments" class="content">
                <h2 class="section-title">
                    <i class="fas fa-calendar-check"></i> Gestion des Rendez-vous
                </h2>
                
                <!-- New Appointment Form -->
                <div class="card">
                    <h3>Nouveau Rendez-vous</h3>
                    <form id="appointment-form">
                        <div class="d-flex" style="gap: 20px; margin-bottom: 20px;">
                            <div style="flex: 1;">
                                <label class="form-label" for="appointment-patient-id">Numéro du patient *</label>
                                <input type="text" id="appointment-patient-id" class="form-control" placeholder="Entrez le numéro du patient" required>
                            </div>
                            <div style="flex: 1;">
                                <label class="form-label" for="appointment-doctor">Docteur *</label>
                                <select id="appointment-doctor" class="form-control" required>
                                    <option value="">Sélectionner un docteur</option>
                                    <option value="Dr. Jean Martin">Dr. Jean Martin</option>
                                    <option value="Dr. Marie Curie">Dr. Marie Curie</option>
                                    <option value="Dr. Paul Durand">Dr. Paul Durand</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="d-flex" style="gap: 20px; margin-bottom: 20px;">
                            <div style="flex: 1;">
                                <label class="form-label" for="appointment-date">Date *</label>
                                <input type="date" id="appointment-date" class="form-control" required>
                            </div>
                            <div style="flex: 1;">
                                <label class="form-label" for="appointment-time">Heure *</label>
                                <select id="appointment-time" class="form-control" required>
                                    <option value="">Sélectionner une heure</option>
                                    <option value="08:00">08:00</option>
                                    <option value="09:00">09:00</option>
                                    <option value="10:00">10:00</option>
                                    <option value="11:00">11:00</option>
                                    <option value="14:00">14:00</option>
                                    <option value="15:00">15:00</option>
                                    <option value="16:00">16:00</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="appointment-reason">Raison du rendez-vous</label>
                            <textarea id="appointment-reason" class="form-control" rows="3" placeholder="Décrivez la raison du rendez-vous"></textarea>
                        </div>
                        
                        <div class="text-right">
                            <button type="submit" class="btn">
                                <i class="fas fa-calendar-plus"></i> Planifier le Rendez-vous
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Appointments List -->
                <div class="card">
                    <h3>Rendez-vous à venir</h3>
                    <div id="upcoming-appointments-list">
                        <!-- Appointments will be added here -->
                    </div>
                </div>
                
                <!-- Past Appointments -->
                <div class="card">
                    <h3>Rendez-vous passés</h3>
                    <div id="past-appointments-list">
                        <!-- Past appointments will be added here -->
                    </div>
                </div>
            </section>
            
            <!-- Laboratory Content -->
            <section id="laboratory" class="content">
                <h2 class="section-title">
                    <i class="fas fa-flask"></i> Laboratoire
                    <span class="service-price">300 Gdes</span>
                </h2>
                
                <div class="card">
                    <h3>Recherche des Analyses</h3>
                    <div class="d-flex" style="gap: 15px;">
                        <div style="flex: 1;">
                            <label class="form-label" for="lab-patient-id">Numéro du patient</label>
                            <input type="text" id="lab-patient-id" class="form-control" placeholder="Entrez le numéro du patient">
                        </div>
                        <div style="align-self: flex-end;">
                            <button id="lab-search-btn" class="btn">
                                <i class="fas fa-search"></i> Rechercher
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Lab Results -->
                <div id="lab-results-container" class="hidden">
                    <!-- Lab results will be added here -->
                </div>
                
                <!-- Pending Analyses -->
                <div class="card">
                    <h3>Analyses en Attente</h3>
                    <div class="table-container">
                        <table id="pending-analyses-table">
                            <thead>
                                <tr>
                                    <th>Numéro Patient</th>
                                    <th>Nom du Patient</th>
                                    <th>Analyses demandées</th>
                                    <th>Date demande</th>
                                    <th>Statut paiement</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="pending-analyses-body">
                                <!-- Pending analyses will be added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <!-- Pharmacy Content -->
            <section id="pharmacy" class="content">
                <h2 class="section-title">
                    <i class="fas fa-pills"></i> Pharmacie
                </h2>
                
                <div class="card">
                    <h3>Recherche des Ordonnances</h3>
                    <div class="d-flex" style="gap: 15px;">
                        <div style="flex: 1;">
                            <label class="form-label" for="pharmacy-patient-id">Numéro du patient</label>
                                    <input type="text" id="pharmacy-patient-id" class="form-control" placeholder="Entrez le numéro du patient">
                        </div>
                        <div style="align-self: flex-end;">
                            <button id="pharmacy-search-btn" class="btn">
                                <i class="fas fa-search"></i> Rechercher
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Pharmacy Results -->
                <div id="pharmacy-results-container" class="hidden">
                    <!-- Pharmacy results will be added here -->
                </div>
                
                <!-- Missing Medication Receipt -->
                <div id="missing-meds-receipt" class="print-area">
                    <div class="receipt">
                        <div class="receipt-header">
                            <h3>Hôpital Saint-Luc</h3>
                            <p>Reçu d'achat de médicaments</p>
                            <p id="receipt-date">Date: </p>
                        </div>
                        <div id="receipt-patient-info">
                            <!-- Patient info will be added here -->
                        </div>
                        <h4>Médicaments à acheter:</h4>
                        <div id="receipt-medications-list">
                            <!-- Medications will be added here -->
                        </div>
                        <div class="receipt-total">
                            <span>Total estimé:</span>
                            <span id="receipt-total-amount">0 Gdes</span>
                        </div>
                        <p class="text-center" style="margin-top: 15px; font-size: 0.9rem;">
                            Présentez ce reçu à la pharmacie externe
                        </p>
                    </div>
                </div>
                
                <!-- Stock Management (Pharmacy can view, Admin only can modify) -->
                <div id="pharmacy-stock-section">
                    <div class="card">
                        <h3>Gestion des Stocks 
                            <span class="service-price" id="stock-permission-label">Vue seulement</span>
                        </h3>
                        <div class="d-flex justify-between mb-3">
                            <h4>Médicaments en stock</h4>
                            <button id="add-medication-btn" class="btn btn-success hidden">
                                <i class="fas fa-plus"></i> Ajouter Médicament
                            </button>
                        </div>
                        
                        <div class="table-container">
                            <table id="stock-table">
                                <thead>
                                    <tr>
                                        <th>Code</th>
                                        <th>Médicament</th>
                                        <th>Quantité en stock</th>
                                        <th>Seuil d'alerte</th>
                                        <th>Prix unitaire</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="stock-table-body">
                                    <!-- Stock items will be added here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Cashier Content -->
            <section id="cashier" class="content">
                <h2 class="section-title">
                    <i class="fas fa-cash-register"></i> Caisse
                </h2>
                
                <!-- External Services -->
                <div id="external-services-section" class="card">
                    <h3>Services Externes (Sans Consultation)</h3>
                    <p class="mb-3">Services disponibles directement sans consultation médicale</p>
                    
                    <div class="external-services-grid">
                        <div class="external-service-card" data-service="Pansement" data-price="150">
                            <i class="fas fa-band-aid fa-2x mb-2" style="color: #1a6bca;"></i>
                            <h4>Pansement</h4>
                            <p>150 Gdes</p>
                        </div>
                        <div class="external-service-card" data-service="Piqûre" data-price="200">
                            <i class="fas fa-syringe fa-2x mb-2" style="color: #1a6bca;"></i>
                            <h4>Piqûre</h4>
                            <p>200 Gdes</p>
                        </div>
                        <div class="external-service-card" data-service="Planning familial" data-price="300">
                            <i class="fas fa-calendar-alt fa-2x mb-2" style="color: #1a6bca;"></i>
                            <h4>Planning familial</h4>
                            <p>300 Gdes</p>
                        </div>
                        <div class="external-service-card" data-service="Vaccination" data-price="250">
                            <i class="fas fa-shield-alt fa-2x mb-2" style="color: #1a6bca;"></i>
                            <h4>Vaccination</h4>
                            <p>250 Gdes</p>
                        </div>
                        <div class="external-service-card" data-service="Soins infirmiers" data-price="180">
                            <i class="fas fa-user-nurse fa-2x mb-2" style="color: #1a6bca;"></i>
                            <h4>Soins infirmiers</h4>
                            <p>180 Gdes</p>
                        </div>
                        <div class="external-service-card" data-service="Prélèvement sanguin" data-price="120">
                            <i class="fas fa-tint fa-2x mb-2" style="color: #1a6bca;"></i>
                            <h4>Prélèvement sanguin</h4>
                            <p>120 Gdes</p>
                        </div>
                    </div>
                    
                    <div class="d-flex" style="gap: 15px; margin-top: 20px;">
                        <div style="flex: 1;">
                            <label class="form-label" for="external-service-patient-id">Numéro du patient</label>
                            <input type="text" id="external-service-patient-id" class="form-control" placeholder="Entrez le numéro du patient">
                        </div>
                        <div style="flex: 1;">
                            <label class="form-label" for="selected-service">Service sélectionné</label>
                            <input type="text" id="selected-service" class="form-control" readonly>
                            <input type="hidden" id="selected-service-price">
                        </div>
                    </div>
                    
                    <div class="text-right mt-3">
                        <button id="add-external-service-btn" class="btn btn-success">
                            <i class="fas fa-plus"></i> Ajouter le Service
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Totaux de la Caisse</h3>
                    <div class="d-flex" style="gap: 20px; margin-bottom: 20px;">
                        <div style="flex: 1;">
                            <h4 id="today-total">Total aujourd'hui: 0 Gdes</h4>
                        </div>
                        <div style="flex: 1;">
                            <h4 id="week-total">Total cette semaine: 0 Gdes</h4>
                        </div>
                    </div>
                    
                    <div class="text-right mt-3">
                        <button id="print-receipt-btn" class="btn" disabled>
                            <i class="fas fa-print"></i> Imprimer le reçu
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Recherche des Factures</h3>
                    <div class="d-flex" style="gap: 15px;">
                        <div style="flex: 1;">
                            <label class="form-label" for="cashier-patient-id">Numéro du patient</label>
                            <input type="text" id="cashier-patient-id" class="form-control" placeholder="Entrez le numéro du patient">
                        </div>
                        <div style="align-self: flex-end;">
                            <button id="cashier-search-btn" class="btn">
                                <i class="fas fa-search"></i> Rechercher
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Payment Receipt -->
                <div id="payment-receipt" class="print-area">
                    <div class="receipt">
                        <div class="receipt-header">
                            <h3>Hôpital Saint-Luc</h3>
                            <p>Reçu de paiement</p>
                            <p id="payment-receipt-date">Date: </p>
                            <p id="payment-receipt-number">Reçu #: </p>
                            <p id="payment-receipt-method">Moyen de paiement: </p>
                        </div>
                        <div id="payment-receipt-patient-info">
                            <!-- Patient info will be added here -->
                        </div>
                        <h4>Services payés:</h4>
                        <div id="payment-receipt-services">
                            <!-- Services will be added here -->
                        </div>
                        <div class="receipt-total">
                            <span>Total payé:</span>
                            <span id="payment-receipt-total">0 Gdes</span>
                        </div>
                        <p class="text-center" style="margin-top: 15px; font-size: 0.9rem;">
                            Merci pour votre visite
                        </p>
                    </div>
                </div>
                
                <!-- Payment Methods Selection -->
                <div id="payment-methods-container" class="hidden">
                    <div class="card">
                        <h3>Sélection du moyen de paiement</h3>
                        
                        <div class="form-group">
                            <label class="form-label" for="payment-method-select">Méthode de paiement *</label>
                            <select id="payment-method-select" class="form-control" required>
                                <option value="">Sélectionner une méthode</option>
                                <option value="cash">Cash</option>
                                <option value="moncash">Mon Cash</option>
                                <option value="natcash">NatCash</option>
                                <option value="debit">Carte Débit</option>
                                <option value="credit">Carte Credit</option>
                                <option value="mastercard">Master Card</option>
                                <option value="bank-transfer">Virement Bancaire</option>
                            </select>
                        </div>
                        
                        <!-- Cash Payment -->
                        <div id="cash-payment-details" class="payment-details hidden">
                            <h4>Paiement en Cash</h4>
                            <div class="form-group">
                                <label class="form-label" for="cash-amount">Montant reçu</label>
                                <input type="number" id="cash-amount" class="form-control" placeholder="Montant en Gdes">
                            </div>
                            <div class="form-group">
                                <label class="form-label" id="cash-change">Monnaie à rendre: 0 Gdes</label>
                            </div>
                        </div>
                        
                        <!-- Mobile Payment Details -->
                        <div id="mobile-payment-details" class="payment-details hidden">
                            <h4>Paiement Mobile (MonCash/NatCash)</h4>
                            <p class="mb-3">Veuillez utiliser les liens suivants pour effectuer le paiement:</p>
                            
                            <div class="text-center mb-3">
                                <a href="#" id="moncash-link" class="payment-link moncash" target="_blank">
                                    <i class="fas fa-mobile-alt"></i> Payer avec MonCash
                                </a>
                                <a href="#" id="natcash-link" class="payment-link natcash" target="_blank">
                                    <i class="fas fa-phone-alt"></i> Payer avec NatCash
                                </a>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="mobile-transaction-id">ID de Transaction *</label>
                                <input type="text" id="mobile-transaction-id" class="form-control" placeholder="Entrez l'ID de transaction (ex: MC123456)">
                                <small>ID reçu après paiement via l'application mobile</small>
                            </div>
                        </div>
                        
                        <!-- Card Payment Details -->
                        <div id="card-payment-details" class="payment-details hidden">
                            <h4>Détails de la carte</h4>
                            <div class="form-group">
                                <label class="form-label" for="card-number">Numéro de carte</label>
                                <input type="text" id="card-number" class="form-control" placeholder="1234 5678 9012 3456" maxlength="19">
                            </div>
                            <div class="d-flex" style="gap: 15px;">
                                <div style="flex: 1;">
                                    <label class="form-label" for="card-expiry">Date d'expiration</label>
                                    <input type="text" id="card-expiry" class="form-control" placeholder="MM/AA" maxlength="5">
                                </div>
                                <div style="flex: 1;">
                                    <label class="form-label" for="card-cvv">CVV</label>
                                    <input type="password" id="card-cvv" class="form-control" placeholder="123" maxlength="4">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="card-holder">Nom du titulaire</label>
                                <input type="text" id="card-holder" class="form-control" placeholder="Nom comme sur la carte">
                            </div>
                        </div>
                        
                        <!-- Bank Transfer Details -->
                        <div id="bank-transfer-details" class="payment-details hidden">
                            <h4>Détails du virement bancaire</h4>
                            <div class="form-group">
                                <label class="form-label">Banque: Unibank</label>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Numéro de compte: 123-456-789-0</label>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Nom du compte: Hôpital Saint-Luc</label>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="transfer-reference">Référence du virement *</label>
                                <input type="text" id="transfer-reference" class="form-control" placeholder="Référence unique">
                            </div>
                        </div>
                        
                        <div class="text-center mt-3">
                            <button id="confirm-payment-btn" class="btn btn-success">
                                <i class="fas fa-check"></i> Confirmer le Paiement
                            </button>
                            <button id="cancel-payment-btn" class="btn btn-secondary">
                                <i class="fas fa-times"></i> Annuler
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Payment Details -->
                <div id="cashier-results-container" class="hidden">
                    <!-- Payment details will be added here -->
                </div>
                
                <!-- Transactions -->
                <div class="card">
                    <h3>Transactions Récentes</h3>
                    <div class="table-container">
                        <table id="transactions-table">
                            <thead>
                                <tr>
                                    <th>Numéro Patient</th>
                                    <th>Nom</th>
                                    <th>Service</th>
                                    <th>Montant</th>
                                    <th>Date</th>
                                    <th>Moyen de paiement</th>
                                    <th>Statut</th>
                                </tr>
                            </thead>
                            <tbody id="transactions-table-body">
                                <!-- Transactions will be added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <!-- Administration Content -->
            <section id="administration" class="content">
                <h2 class="section-title">
                    <i class="fas fa-chart-bar"></i> Administration
                </h2>
                
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon" style="background-color: #1a6bca;">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-revenue">0 Gdes</h3>
                            <p>Revenus totaux</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background-color: #28a745;">
                            <i class="fas fa-user-check"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-patients">0</h3>
                            <p>Patients totaux</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background-color: #ffc107;">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-appointments">0</h3>
                            <p>Rendez-vous totaux</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background-color: #dc3545;">
                            <i class="fas fa-flask"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-analyses">0</h3>
                            <p>Analyses totales</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Statistiques par Service</h3>
                    <div class="table-container">
                        <table id="service-stats-table">
                            <thead>
                                <tr>
                                    <th>Service</th>
                                    <th>Prix unitaire</th>
                                    <th>Nombre de visites</th>
                                    <th>Revenus générés</th>
                                </tr>
                            </thead>
                            <tbody id="service-stats-body">
                                <!-- Service stats will be added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Performance des Employés (Aujourd'hui)</h3>
                    <div class="table-container">
                        <table id="employee-stats-table">
                            <thead>
                                <tr>
                                    <th>Employé</th>
                                    <th>Service</th>
                                    <th>Patients traités</th>
                                    <th>Revenus générés</th>
                                </tr>
                            </thead>
                            <tbody id="employee-stats-body">
                                <!-- Employee stats will be added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Transactions Journalières</h3>
                    <div class="table-container">
                        <table id="daily-transactions-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Consultations</th>
                                    <th>Analyses</th>
                                    <th>Services externes</th>
                                    <th>Pharmacie</th>
                                    <th>Total jour</th>
                                </tr>
                            </thead>
                            <tbody id="daily-transactions-body">
                                <!-- Daily transactions will be added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <!-- Employees Content -->
            <section id="employees" class="content">
                <h2 class="section-title">
                    <i class="fas fa-users"></i> Gestion des Employés
                </h2>
                
                <!-- Employee Management Form (Admin only) -->
                <div id="employee-management-form" class="card hidden">
                    <h3 id="employee-form-title">Ajouter un Employé</h3>
                    <form id="employee-form">
                        <input type="hidden" id="employee-edit-id">
                        
                        <div class="d-flex" style="gap: 20px; margin-bottom: 20px;">
                            <div style="flex: 1;">
                                <label class="form-label" for="employee-form-id">ID Employé *</label>
                                <input type="text" id="employee-form-id" class="form-control" placeholder="EMP001" readonly>
                            </div>
                            <div style="flex: 1;">
                                <label class="form-label" for="employee-form-name">Nom complet *</label>
                                <input type="text" id="employee-form-name" class="form-control" placeholder="Nom et prénom" required>
                            </div>
                        </div>
                        
                        <div class="d-flex" style="gap: 20px; margin-bottom: 20px;">
                            <div style="flex: 1;">
                                <label class="form-label" for="employee-form-role">Rôle *</label>
                                <select id="employee-form-role" class="form-control" required>
                                    <option value="">Sélectionner un rôle</option>
                                    <option value="admin">Administrateur</option>
                                    <option value="doctor">Docteur</option>
                                    <option value="lab">Technicien de Laboratoire</option>
                                    <option value="pharmacy">Pharmacien</option>
                                    <option value="reception">Réceptionniste</option>
                                    <option value="cashier">Caissier</option>
                                </select>
                            </div>
                            <div style="flex: 1;">
                                <label class="form-label" for="employee-form-pin">Code PIN *</label>
                                <input type="password" id="employee-form-pin" class="form-control" placeholder="Code à 4 chiffres" maxlength="4" required>
                            </div>
                        </div>
                        
                        <div class="d-flex" style="gap: 20px; margin-bottom: 20px;">
                            <div style="flex: 1;">
                                <label class="form-label" for="employee-form-email">Email</label>
                                <input type="email" id="employee-form-email" class="form-control" placeholder="email@hopital.fr">
                            </div>
                            <div style="flex: 1;">
                                <label class="form-label" for="employee-form-phone">Téléphone</label>
                                <input type="tel" id="employee-form-phone" class="form-control" placeholder="Numéro de téléphone">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="employee-form-access">Droits d'accès</label>
                            <textarea id="employee-form-access" class="form-control" rows="3" placeholder="Description des droits d'accès"></textarea>
                        </div>
                        
                        <div class="d-flex justify-between">
                            <button type="button" id="cancel-employee-form-btn" class="btn btn-secondary">
                                <i class="fas fa-times"></i> Annuler
                            </button>
                            <button type="submit" class="btn">
                                <i class="fas fa-save"></i> Enregistrer
                            </button>
                        </div>
                    </form>
                </div>
                
                <div class="card">
                    <h3>Pointage des Employés</h3>
                    <div class="d-flex" style="gap: 20px; margin-bottom: 20px;">
                        <div style="flex: 1;">
                            <label class="form-label" for="employee-id">ID Employé</label>
                            <input type="text" id="employee-id" class="form-control" placeholder="Entrez votre ID employé">
                        </div>
                        <div style="flex: 1;">
                            <label class="form-label" for="employee-pin">Code PIN</label>
                            <input type="password" id="employee-pin" class="form-control" placeholder="Entrez votre code PIN">
                        </div>
                    </div>
                    
                    <div class="d-flex" style="gap: 15px;">
                        <button id="check-in-btn" class="btn">
                            <i class="fas fa-sign-in-alt"></i> Pointage Entrée
                        </button>
                        <button id="check-out-btn" class="btn btn-secondary">
                            <i class="fas fa-sign-out-alt"></i> Pointage Sortie
                        </button>
                        <button id="face-id-btn" class="btn btn-success">
                            <i class="fas fa-id-badge"></i> Simuler Face ID
                        </button>
                        <button id="add-employee-btn" class="btn btn-success hidden">
                            <i class="fas fa-plus"></i> Ajouter Employé
                        </button>
                    </div>
                </div>
                
                <!-- Employee Presence -->
                <div class="card">
                    <h3>Présence Aujourd'hui</h3>
                    <div class="table-container">
                        <table id="presence-table">
                            <thead>
                                <tr>
                                    <th>Employé</th>
                                    <th>Service</th>
                                    <th>Heure d'arrivée</th>
                                    <th>Heure de départ</th>
                                    <th>Statut</th>
                                </tr>
                            </thead>
                            <tbody id="presence-table-body">
                                <!-- Presence records will be added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Employee List (Admin only) -->
                <div id="employee-admin-section" class="hidden">
                    <div class="card">
                        <h3>Liste des Employés</h3>
                        <div class="table-container">
                            <table id="employees-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nom</th>
                                        <th>Service</th>
                                        <th>Email</th>
                                        <th>Téléphone</th>
                                        <th>Droits d'accès</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="employees-table-body">
                                    <!-- Employees will be added here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Emergency Content -->
            <section id="emergency" class="content">
                <h2 class="section-title">
                    <i class="fas fa-ambulance"></i> Service d'Urgence
                </h2>
                
                <div class="emergency-section">
                    <div class="emergency-header">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>Service d'Urgence - Traitement Prioritaire</h3>
                    </div>
                    <p>Dans cette section, les patients en urgence peuvent recevoir tous les services nécessaires sans paiement immédiat. Le paiement sera effectué ultérieurement à la caisse.</p>
                    
                    <div class="d-flex" style="gap: 15px; margin-top: 20px;">
                        <div style="flex: 1;">
                            <label class="form-label" for="emergency-patient-id">Numéro du patient (URG*)</label>
                            <input type="text" id="emergency-patient-id" class="form-control" placeholder="Ex: URG001, URG-PED001">
                        </div>
                        <div style="align-self: flex-end;">
                            <button id="emergency-search-btn" class="btn btn-danger">
                                <i class="fas fa-search"></i> Rechercher Patient Urgence
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Emergency Patient Info -->
                <div id="emergency-patient-info" class="card hidden">
                    <h3>Patient en Urgence</h3>
                    <div id="emergency-patient-details">
                        <!-- Patient details will be added here -->
                    </div>
                </div>
                
                <!-- Emergency Services -->
                <div id="emergency-services-container" class="hidden">
                    <div class="card">
                        <h3>Services d'Urgence</h3>
                        <p class="mb-3">Tous les services seront facturés et le patient devra régler à la caisse avant de quitter l'hôpital.</p>
                        
                        <div class="d-flex" style="gap: 15px; margin-bottom: 20px;">
                            <button id="emergency-consultation-btn" class="btn" style="flex: 1;">
                                <i class="fas fa-stethoscope"></i> Consultation d'Urgence
                                <span class="service-price">800 Gdes</span>
                            </button>
                            <button id="emergency-lab-btn" class="btn" style="flex: 1;">
                                <i class="fas fa-flask"></i> Analyses d'Urgence
                                <span class="service-price">500 Gdes</span>
                            </button>
                            <button id="emergency-pharmacy-btn" class="btn" style="flex: 1;">
                                <i class="fas fa-pills"></i> Médicaments d'Urgence
                            </button>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="emergency-notes">Notes médicales d'urgence</label>
                            <textarea id="emergency-notes" class="form-control" rows="3" placeholder="État du patient, mesures prises, observations..."></textarea>
                        </div>
                        
                        <div class="text-right">
                            <button id="save-emergency-record-btn" class="btn btn-danger">
                                <i class="fas fa-save"></i> Enregistrer le Dossier d'Urgence
                            </button>
                        </div>
                    </div>
                    
                    <!-- Emergency Transactions -->
                    <div class="card">
                        <h3>Transactions d'Urgence</h3>
                        <div id="emergency-transactions-list">
                            <!-- Emergency transactions will be added here -->
                        </div>
                        <div class="text-right mt-3">
                            <button id="print-emergency-bill-btn" class="btn">
                                <i class="fas fa-print"></i> Imprimer la Facture d'Urgence
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Current Emergency Patients -->
                <div class="card">
                    <h3>Patients en Urgence Actifs</h3>
                    <div class="table-container">
                        <table id="emergency-patients-table">
                            <thead>
                                <tr>
                                    <th>Numéro</th>
                                    <th>Nom</th>
                                    <th>Heure d'admission</th>
                                    <th>État</th>
                                    <th>Montant dû</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="emergency-patients-body">
                                <!-- Emergency patients will be added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Print Container for printing -->
    <div id="print-container" class="print-container"></div>

    <script src="app.js"></script>
</body>
</html>